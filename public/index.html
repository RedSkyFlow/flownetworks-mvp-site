<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body class="bg-dark-primary text-text-light antialiased">
    <section id="contact" class="py-20">
        <div class="container mx-auto px-6">
            <div class="max-w-2xl mx-auto text-center">
                <h2 id="contact-heading" class="text-3xl md:text-4xl font-bold mb-4">Ready to Give Your Venue Sight?</h2>
                <p id="contact-subheading" class="text-gray-300 text-lg mb-8">It starts with a conversation. Let our strategists show you the untapped potential within your venue. Start for free todayâ€”no credit card, no obligation.</p>
                
                <form id="contact-form" action="/api/contact" method="POST" class="space-y-6">
                    <input type="hidden" id="cta_source" name="cta_source" value="Activate Free Plan">

                    <div>
                        <label for="full_name" class="sr-only">Full Name</label>
                        <input type="text" name="full_name" id="full_name" placeholder="Full Name" required class="w-full bg-dark-secondary border border-brand-teal/30 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-action-blue transition">
                    </div>
                    
                    <div id="business_name_field">
                        <label for="business_name" class="sr-only">Business Name</label>
                        <input type="text" name="business_name" id="business_name" placeholder="Business Name" class="w-full bg-dark-secondary border border-brand-teal/30 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-action-blue transition">
                    </div>

                    <div>
                        <label for="email" class="sr-only">Your Email</label>
                        <input type="email" name="email" id="email" placeholder="Your Email" required class="w-full bg-dark-secondary border border-brand-teal/30 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-action-blue transition">
                    </div>

                    <div id="city_field">
                        <label for="city" class="sr-only">City</label>
                        <input type="text" name="city" id="city" placeholder="City" class="w-full bg-dark-secondary border border-brand-teal/30 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-action-blue transition">
                    </div>
                    
                    <div>
                        <label for="comment" class="sr-only">Comment/Additional Info</label>
                        <textarea name="comment" id="comment" rows="4" placeholder="Tell us about your venue and your goals..." class="w-full bg-dark-secondary border border-brand-teal/30 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-action-blue transition"></textarea>
                    </div>

                    <div class="cf-turnstile" data-sitekey="0x4AAAAAAB4_3paL9cBdsayD" data-theme="dark"></div>

                    <div>
                        <button id="submit-button" type="submit" class="w-full px-8 py-3 rounded-lg font-bold text-white text-lg enhanced-button enhanced-button-primary">
                            Activate My Free Plan
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <script>
        // ... (your existing navbar and mobile menu scripts) ...

        // --- NEW: Dynamic CTA Form Handling ---
        const contactForm = document.getElementById('contact-form');
        const contactHeading = document.getElementById('contact-heading');
        const submitButton = document.getElementById('submit-button');
        const ctaSourceInput = document.getElementById('cta_source');
        
        // Add more fields here as needed
        const businessNameField = document.getElementById('business_name_field');
        const cityField = document.getElementById('city_field');

        const ctaConfigs = {
            'default': {
                heading: "Ready to Give Your Venue Sight?",
                buttonText: "Activate My Free Plan",
                ctaValue: "Activate Free Plan",
                showFields: [] // No extra fields for the default
            },
            'Request a Demo': {
                heading: "Request a Live Demo",
                buttonText: "Request Your Demo",
                ctaValue: "Request a Demo",
                showFields: [businessNameField, cityField] // Show these for a demo request
            },
            'Talk to an Expert': {
                heading: "Talk to an Expert",
                buttonText: "Schedule a Consultation",
                ctaValue: "Talk to an Expert",
                showFields: [businessNameField, cityField]
            }
            // Add other CTA button text values here
        };

        function updateFormForCTA(ctaType = 'default') {
            const config = ctaConfigs[ctaType] || ctaConfigs['default'];

            contactHeading.textContent = config.heading;
            submitButton.textContent = config.buttonText;
            ctaSourceInput.value = config.ctaValue;

            // Hide all optional fields first
            [businessNameField, cityField].forEach(field => field.style.display = 'none');
            
            // Show fields based on config
            config.showFields.forEach(field => field.style.display = 'block');
        }

        // Add event listeners to all CTA buttons that link to the #contact section
        document.querySelectorAll('a[href="#contact"]').forEach(link => {
            link.addEventListener('click', (e) => {
                // Use the link's text content to determine the CTA type
                const ctaType = e.target.textContent.trim();
                updateFormForCTA(ctaType);
            });
        });

        // Initialize the form to the default state
        updateFormForCTA('default');
    </script>
</body>
</html>